account_id = "ac7ee4615628005dc5ba0a22f0aae2a6"
name = "publish-requests"
main = "src/index.js"
compatibility_date = "2025-02-14"

# -------------------------------------------------------------------
# Shared defaults (used by `wrangler dev` for local development)
# -------------------------------------------------------------------
[vars]
ENVIRONMENT = "dev"
EMAIL_PROVIDER = "gmail"

[observability]
[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
persist = true

# ===================================================================
# Customer / Demo Environments
#
# Deploy:  npx wrangler deploy --env <name>
# Secrets: npx wrangler secret put <KEY> --env <name>
# ===================================================================

# --- WSU (Western Sydney University) --------------------------------
# Deploys as: publish-requests-wsu
# URL:        https://publish-requests-wsu.aem-poc-lab.workers.dev
#
# Secrets (set once per env):
#   npx wrangler secret put WSU_EMAIL_API_KEY --env wsu
# -------------------------------------------------------------------
[env.wsu]
name = "publish-requests-wsu"
[env.wsu.vars]
ENVIRONMENT = "production"
EMAIL_PROVIDER = "wsu-api"
WSU_EMAIL_API_URL = "https://www.aem-uat-65.westernsydney.edu.au/bin/wsu/sendEmail.json"
WSU_EMAIL_FROM_ADDRESS = "aem-noreply@westernsydney.edu.au"
WSU_EMAIL_FROM_NAME = "WSU"

# --- Demo (internal demos) -----------------------------------------
# Deploys as: publish-requests-demo
# URL:        https://publish-requests-demo.aem-poc-lab.workers.dev
#
# Secrets (set once per env):
#   npx wrangler secret put PUBLISH_REQUESTS_GMAIL_CLIENT_ID --env demo
#   npx wrangler secret put PUBLISH_REQUESTS_GMAIL_CLIENT_SECRET --env demo
#   npx wrangler secret put PUBLISH_REQUESTS_GMAIL_REFRESH_TOKEN --env demo
#   npx wrangler secret put PUBLISH_REQUESTS_GMAIL_EMAIL --env demo
# -------------------------------------------------------------------
[env.demo]
name = "publish-requests-demo"
[env.demo.vars]
ENVIRONMENT = "demo"
EMAIL_PROVIDER = "gmail"
# GMAIL_FROM = "DA Publishing <sagaradobework@gmail.com>"
